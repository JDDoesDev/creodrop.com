---
import BaseLayout from './BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title: string;
  description: string;
  publishDate: Date;
  author?: string;
  image?: string;
  slug: string;
}

const {
  title,
  description,
  publishDate,
  author = 'Creodrop',
  image,
  slug,
} = Astro.props;

const canonical = `https://creodrop.com/blog/${slug}/`;

const articleJsonLd = {
  '@context': 'https://schema.org',
  '@type': 'BlogPosting',
  headline: title,
  description: description,
  datePublished: publishDate.toISOString(),
  author: {
    '@type': 'Organization',
    name: author,
  },
  publisher: {
    '@type': 'Organization',
    name: 'Creodrop',
    logo: 'https://creodrop.com/images/creo-logo.svg',
  },
};
---

<BaseLayout
  title={`${title} | Creodrop Blog`}
  description={description}
  canonical={canonical}
  ogTitle={title}
  ogDescription={description}
  ogImage={image || 'https://creodrop.com/images/og-image.png'}
  jsonLd={[articleJsonLd]}
>
  <Header />
  <main>
    <article class="blog-post">
      <div class="container">
        <header class="blog-post-header">
          <h1>{title}</h1>
          <time datetime={publishDate.toISOString()}>
            {
              publishDate.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
              })
            }
          </time>
        </header>
        <div class="blog-post-content">
          <slot />
        </div>
      </div>
    </article>
  </main>
  <Footer />
</BaseLayout>
